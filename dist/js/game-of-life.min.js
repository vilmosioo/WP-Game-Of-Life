!function(e,n){"use strict";var t="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,l=function(){for(var e,t,l=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,O=l.length,o={};O>r;r++)if(e=l[r],e&&e[1]in n){for(r=0,t=e.length;t>r;r++)o[l[0][r]]=e[r];return o}return!1}(),r={request:function(e){var r=l.requestFullscreen;e=e||n.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[r]():e[r](t&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){n[l.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:l};return l?(Object.defineProperties(r,{isFullscreen:{get:function(){return!!n[l.fullscreenElement]}},element:{enumerable:!0,get:function(){return n[l.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!n[l.fullscreenEnabled]}}}),n.addEventListener(l.fullscreenchange,function(e){r.onchange.call(r,e)}),n.addEventListener(l.fullscreenerror,function(e){r.onerror.call(r,e)}),void(e.screenfull=r)):void(e.screenfull=!1)}(window,document);var VI_GOL_SETTINGS=window.VI_GOL_SETTINGS||{},VI_GOL=function(e,n,t,l){var r,O,o,c,i,u,a,s={},f=n.N||125,x=Math.floor(666*f/1e3),d=!1,b=n.width||1e3,h=Math.floor(666*b/1e3),m=new Array(f*x),g=new Array(f*x),p=function(){r=document.getElementById(n.ID||"gol-canvas"),u=r.getContext("2d"),b=Math.min(b,l.body.clientWidth-20),h=Math.floor(666*b/1e3),r.width=b,r.height=h,r.style.width=b+"px",r.style.height=h+"px",a={Glidergun:"........................Ox......................O.Ox............OO......OO............OOx...........O...O....OO............OOxOO........O.....O...OOxOO........O...O.OO....O.Ox..........O.....O.......Ox...........O...Ox............OO",Ship:"...Ox.O...OxOxO....OxOOOOO",Glider:".Ox..OxOOO",Noah:"..........O.Ox.........Ox..........O..Ox............OOOxxxxxx.OxO.OxxO..Ox..OOx...O",Space:"...........OO.....OOOOx.........OO.OO...O...Ox.........OOOO........Ox..........OO.....O..Oxx........Ox.......OO........OOx......O.........O..Ox.......OOOOO....O..Ox........OOOO...OO.OOx...........O....OOxxxx..................OOOOxO..O.............O...Ox....O................OxO...O............O..Ox.OOOO",Pentomino:".OOxOOx.O"}},v=function(){O=e('<select class="form-control"></select>').width("300px");for(var n in a)a.hasOwnProperty(n)&&O.append(e('<option value="'+a[n]+'">'+n+"</option>"));o=e('<button class="active btn btn-primary">Pause</button>'),c=e('<button class="btn btn-primary">Save image</button>'),i=e('<button class="btn btn-primary">Full screen</button>');var l=e("<p></p>").append(o).append("&nbsp;").append(c);t.enabled&&l.append("&nbsp;").append(i),e(r).before(l),e(r).before(e("<p></p>").append(O))},w=function(){window.location=r.toDataURL("image/png")},E=function(){o.text(d?"Run":"Pause"),o.toggleClass("active",!d),d=!d},F=function(){c.click(w),o.click(E),t.enabled&&i.click(function(){t.request()}),O.change(function(){q(O.val())})},S=function(){var e=u.createRadialGradient(b/2,b/2,100,b/2,b/2,b);e.addColorStop(0,"#666"),e.addColorStop(1,"#000");for(var t=0;f>t;t++)for(var l=0;x>l;l++){var r=Math.floor(b/f),O=Math.floor(h/x);u.fillStyle=n.background||"#aaa",u.fillRect(t*r,l*O,r,O),u.globalAlpha=.1,u.beginPath(),u.strokeStyle="#666",u.lineWidth=1,u.moveTo(t*r,l*O),u.lineTo(t*r+r,l*O),u.lineTo(t*r+r,l*O+O),u.lineTo(t*r,l*O+O),u.lineTo(t*r,l*O),u.stroke(),u.globalAlpha=1}},k=function(e,n){return 1===m[e*f+n]},_=function(e,n){return m[e*f+n]>=2},y=function(e,n){return m[e*f+n]},T=function(e,n,t){g[e*f+n]=t},A=function(e,n){return g[e*f+n]!==m[e*f+n]},G=function(e,t){var l=Math.floor(b/f),r=Math.floor(h/x),O=n.cell_active_color||"rgb(65,180,255)";O=O.match(/\d+/g),O&&3===O.length||(O=[65,180,255]),A(e,t)&&(u.fillStyle=1===g[e*f+t]?n.cell_active_color||"#fff":g[e*f+t]>=2?"rgba("+O[0]+","+O[1]+","+O[2]+","+.75*g[e*f+t]/10+")":n.cell_inactive_color||"#000",u.fillRect(e*l,t*r,l,r),m[e*f+t]=g[e*f+t])},I=function(e,n){var t=0;return k(e,n-1)&&t++,k(e,n+1)&&t++,k(e-1,n-1)&&t++,k(e-1,n)&&t++,k(e-1,n+1)&&t++,k(e+1,n-1)&&t++,k(e+1,n)&&t++,k(e+1,n+1)&&t++,0===e&&(k(f-1,n-1)&&t++,k(f-1,n)&&t++,k(f-1,n+1)&&t++),e===f-1&&(k(0,n-1)&&t++,k(0,n)&&t++,k(0,n+1)&&t++),n===x-1&&(k(e,0)&&t++,k(e-1,0)&&t++,k(e+1,0)&&t++),0===n&&(k(e,x-1)&&t++,k(e-1,x-1)&&t++,k(e+1,x-1)&&t++),t},L=function(e){for(var n=f/5,t=0,l=0,r=0;t<e.length;){var O=e.charAt(t++);"O"===O&&T(n+r,n+l,1),"x"===O&&(r=-1,l++),r++}},R=function(){if(d){var e=0,n=0;for(e=0;f>e;e++)for(n=0;x>n;n++){var t=I(e,n);k(e,n)?1>=t?T(e,n,2):t>=4&&T(e,n,2):3===t?T(e,n,1):_(e,n)&&(y(e,n)>=10?T(e,n,0):T(e,n,y(e,n)+1))}for(e=0;f>e;e++)for(n=0;x>n;n++)G(e,n)}window.requestAnimationFrame(R)},q=function(e){u.clearRect(0,0,b,h),m.length=0,g.length=0,S(),L(e),window.requestAnimationFrame(R)};return s.load=function(){p(),v(),F(),E(),q(a.Glidergun)},s}(jQuery,VI_GOL_SETTINGS,screenfull,document);jQuery(VI_GOL.load);