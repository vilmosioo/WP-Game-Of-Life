!function(e,n){"use strict";var t="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,t,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,o=r.length,i={};o>l;l++)if(e=r[l],e&&e[1]in n){for(l=0,t=e.length;t>l;l++)i[r[0][l]]=e[l];return i}return!1}(),l={request:function(e){var l=r.requestFullscreen;e=e||n.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[l]():e[l](t&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){n[r.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:r};return r?(Object.defineProperties(l,{isFullscreen:{get:function(){return!!n[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return n[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!n[r.fullscreenEnabled]}}}),n.addEventListener(r.fullscreenchange,function(e){l.onchange.call(l,e)}),n.addEventListener(r.fullscreenerror,function(e){l.onerror.call(l,e)}),void(e.screenfull=l)):void(e.screenfull=!1)}(window,document),function(){for(var e=0,n=["webkit","moz"],t=0;t<n.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-e)),l=window.setTimeout(function(){n(t+r)},r);return e=t+r,l}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var VI_GOL_SETTINGS=window.VI_GOL_SETTINGS||{},VI_GOL=function(e,n,t,r){var l,o,i,O,a,c,u,s={},f=n.N||125,m=Math.floor(666*f/1e3),d=!1,x=n.width||1e3,w=Math.floor(666*x/1e3),b=new Array(f*m),h=new Array(f*m),g=function(){l=document.getElementById(n.ID||"gol-canvas"),c=l.getContext("2d"),x=Math.min(x,r.body.clientWidth-20),w=Math.floor(666*x/1e3),l.width=x,l.height=w,l.style.width=x+"px",l.style.height=w+"px",u={Glidergun:"........................Ox......................O.Ox............OO......OO............OOx...........O...O....OO............OOxOO........O.....O...OOxOO........O...O.OO....O.Ox..........O.....O.......Ox...........O...Ox............OO",Ship:"...Ox.O...OxOxO....OxOOOOO",Glider:".Ox..OxOOO",Noah:"..........O.Ox.........Ox..........O..Ox............OOOxxxxxx.OxO.OxxO..Ox..OOx...O",Space:"...........OO.....OOOOx.........OO.OO...O...Ox.........OOOO........Ox..........OO.....O..Oxx........Ox.......OO........OOx......O.........O..Ox.......OOOOO....O..Ox........OOOO...OO.OOx...........O....OOxxxx..................OOOOxO..O.............O...Ox....O................OxO...O............O..Ox.OOOO",Pentomino:".OOxOOx.O"}},p=function(){o=e('<select class="form-control"></select>').width("300px");for(var n in u)u.hasOwnProperty(n)&&o.append(e('<option value="'+u[n]+'">'+n+"</option>"));i=e('<button class="active btn btn-primary">Pause</button>'),O=e('<button class="btn btn-primary">Save image</button>'),a=e('<button class="btn btn-primary">Full screen</button>');var r=e("<p></p>").append(i).append("&nbsp;").append(O);t.enabled&&r.append("&nbsp;").append(a),e(l).before(r),e(l).before(e("<p></p>").append(o))},F=function(){window.location=l.toDataURL("image/png")},v=function(){i.text(d?"Run":"Pause"),i.toggleClass("active",!d),d=!d},E=function(){O.click(F),i.click(v),t.enabled&&a.click(function(){t.request()}),o.change(function(){L(o.val())})},S=function(){var e=c.createRadialGradient(x/2,x/2,100,x/2,x/2,x);e.addColorStop(0,"#666"),e.addColorStop(1,"#000");for(var t=0;f>t;t++)for(var r=0;m>r;r++){var l=Math.floor(x/f),o=Math.floor(w/m);c.fillStyle=n.background||"#aaa",c.fillRect(t*l,r*o,l,o),c.globalAlpha=.1,c.beginPath(),c.strokeStyle="#666",c.lineWidth=1,c.moveTo(t*l,r*o),c.lineTo(t*l+l,r*o),c.lineTo(t*l+l,r*o+o),c.lineTo(t*l,r*o+o),c.lineTo(t*l,r*o),c.stroke(),c.globalAlpha=1}},A=function(e,n){return 1===b[e*f+n]},k=function(e,n){return b[e*f+n]>=2},_=function(e,n){return b[e*f+n]},q=function(e,n,t){h[e*f+n]=t},y=function(e,n){return h[e*f+n]!==b[e*f+n]},T=function(e,t){var r=Math.floor(x/f),l=Math.floor(w/m),o=n.cell_active_color||"rgb(65,180,255)";o=o.match(/\d+/g),o&&3===o.length||(o=[65,180,255]),y(e,t)&&(c.fillStyle=1===h[e*f+t]?n.cell_active_color||"#fff":h[e*f+t]>=2?"rgba("+o[0]+","+o[1]+","+o[2]+","+.75*h[e*f+t]/10+")":n.cell_inactive_color||"#000",c.fillRect(e*r,t*l,r,l),b[e*f+t]=h[e*f+t])},R=function(e,n){var t=0;return A(e,n-1)&&t++,A(e,n+1)&&t++,A(e-1,n-1)&&t++,A(e-1,n)&&t++,A(e-1,n+1)&&t++,A(e+1,n-1)&&t++,A(e+1,n)&&t++,A(e+1,n+1)&&t++,0===e&&(A(f-1,n-1)&&t++,A(f-1,n)&&t++,A(f-1,n+1)&&t++),e===f-1&&(A(0,n-1)&&t++,A(0,n)&&t++,A(0,n+1)&&t++),n===m-1&&(A(e,0)&&t++,A(e-1,0)&&t++,A(e+1,0)&&t++),0===n&&(A(e,m-1)&&t++,A(e-1,m-1)&&t++,A(e+1,m-1)&&t++),t},G=function(e){for(var n=f/5,t=0,r=0,l=0;t<e.length;){var o=e.charAt(t++);"O"===o&&q(n+l,n+r,1),"x"===o&&(l=-1,r++),l++}},I=function(){if(d){var e=0,n=0;for(e=0;f>e;e++)for(n=0;m>n;n++){var t=R(e,n);A(e,n)?1>=t?q(e,n,2):t>=4&&q(e,n,2):3===t?q(e,n,1):k(e,n)&&(_(e,n)>=10?q(e,n,0):q(e,n,_(e,n)+1))}for(e=0;f>e;e++)for(n=0;m>n;n++)T(e,n)}window.requestAnimationFrame(I)},L=function(e){c.clearRect(0,0,x,w),b.length=0,h.length=0,S(),G(e),window.requestAnimationFrame(I)};return s.load=function(){g(),p(),E(),v(),L(u.Glidergun)},s}(jQuery,VI_GOL_SETTINGS,screenfull,document);jQuery(VI_GOL.load);